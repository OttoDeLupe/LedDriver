Code written based on Grenning's TDD For Embedded C book - I used CppUTest rather than Unity for the test framework.